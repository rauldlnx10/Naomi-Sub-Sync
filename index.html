<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="title">Naomi Sub Sync</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700&display=swap" rel="stylesheet">
</head>
<body class="dark-theme">
    <div id="controls">
        <div class="control-group">
            <label class="app-name">Naomi Sub Sync</label>
            <a href="https://www.paypal.com/donate/?business=TQRD9HTEL6CC8&no_recurring=0&currency_code=EUR" target="_blank" class="donate-button" data-i18n="donateButton">
            Donar con PayPal
            </a>
        </div>
        <div class="control-group">
            <label for="video-file" class="file-label" data-i18n="loadVideo">üìΩ Cargar Video</label>
            <input type="file" id="video-file" accept="video/*">
            <label for="subtitle-file" class="file-label" data-i18n="loadSubs">üìÑ Cargar Subt√≠tulos</label>
            <input type="file" id="subtitle-file" accept=".srt, .vtt">
        </div>
        <div class="control-group">
            <button id="export-btn" data-i18n="exportButton">ü°ª Exportar</button>
            <button id="help-btn" data-i18n="helpButton">‚ùì Ayuda</button>
        </div>
        <span id="error-message"></span>
        <button id="settings-btn" data-i18n="settingsButton">‚öôÔ∏è</button>
    </div>

    <div id="main-content">
        <div id="video-container">
            <video id="video"></video>
            <div id="subtitle-overlay"></div>
        </div>

        <div id="middle-controls">
            <button id="undo-btn" data-i18n-title="undoTitle" disabled>‚ü≤</button>
            <button id="redo-btn" data-i18n-title="redoTitle" disabled>‚ü≥</button>
            <button id="add-sub-btn-timeline" data-i18n-title="addButton">+</button>
            <button id="edit-sub-btn-timeline" data-i18n-title="editButton" disabled>‚úèÔ∏è</button>
            <button id="delete-sub-btn-timeline" data-i18n-title="deleteButton" disabled>‚ùå</button>
            <button id="split-sub-btn-timeline" data-i18n-title="splitTitle" disabled>‚úÇÔ∏è</button>
            <button id="merge-sub-btn-timeline" data-i18n-title="mergeTitle" disabled>üîó</button>
            <button id="translate-btn" data-i18n-title="translateButton">üåê</button>
            <button class="center-btn" id="center-timeline" data-i18n-title="centerTitle">‚äπ</button>
            <button id="auto-scroll-btn" class="auto-scroll-btn" data-i18n-title="autoScrollTitle">‚õ∂</button>
        </div>

        <div id="timeline-wrapper">
            <div id="time-ruler"></div>
            <div id="timeline-container">
                <div id="timeline">
                    <div id="waveform-track">
                        <canvas id="waveform-canvas"></canvas>
                    </div>
                </div>
                <div id="current-time"></div>
            </div>
        </div>
    </div>

    <div id="bottom-controls">
        <div class="control-group" id="video-controls">
            <button id="play-pause-btn" class="video-ctrl-btn" data-i18n-title="playPauseTitle">‚ñ∂</button>
            <button id="prev-sub-btn" class="video-ctrl-btn" data-i18n-title="prevSubTitle">‚èÆ</button>
            <button id="step-backward-btn" class="video-ctrl-btn" data-i18n-title="stepBackwardTitle">‚Ü∫</button>
            <button id="step-forward-btn" class="video-ctrl-btn" data-i18n-title="stepForwardTitle">‚Üª</button>
            <button id="next-sub-btn" class="video-ctrl-btn" data-i18n-title="nextSubTitle">‚è≠</button>
            <div class="separator" style="width: 10px;"></div>
            <button id="mute-unmute-btn" class="video-ctrl-btn" data-i18n-title="muteUnmuteTitle">üîä</button>
            <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="1" data-i18n-title="volumeTitle">
            <span id="volume-value">100%</span>
        </div>
        <div class="control-group" id="playback-rate-control">
            <label for="playback-rate-slider" data-i18n="playbackRateLabel">Velocidad:</label>
            <input type="range" id="playback-rate-slider" min="0.25" max="2" step="0.25" value="1" data-i18n-title="playbackRateTitle">
            <span id="playback-rate-value">1.0x</span>
        </div>
        <div class="control-group" id="zoom-control">
            <label for="zoom-slider" data-i18n="zoomLabel">Zoom:</label>
            <button class="zoom-btn" id="zoom-out" data-i18n-title="zoomOutTitle">-</button>
            <input type="range" id="zoom-slider" min="20" max="500" value="100">
            <span id="zoom-value">100</span>
            <button class="zoom-btn" id="zoom-in" data-i18n-title="zoomInTitle">+</button>
        </div>
        <div class="control-group">
            <label for="offset-input" data-i18n="offsetLabel">Desplazar:</label>
            <input type="number" id="offset-input" value="0" step="100" style="width: 80px;" data-i18n-title="offsetTitle">
            <span style="color: #999;">ms</span>
            <button id="apply-offset-btn" data-i18n="applyOffsetButton" class="small-button">Aplicar</button>
        </div>
        <div class="find-controls">
            <input type="text" id="find-input" data-i18n-placeholder="findPlaceholder" style="max-width: 150px;">
            <input type="text" id="replace-input" data-i18n-placeholder="replacePlaceholder" style="max-width: 150px;">
            <button id="find-next-btn" class="small-button" data-i18n="findNextButton">üîé Siguiente</button>
            <button id="replace-btn" class="small-button" data-i18n="replaceButton">Reemplazar</button>
            <button id="replace-all-btn" class="small-button" data-i18n="replaceAllButton">Reemplazar Todo</button>
        </div>
    </div>

    <div id="edit-popup" class="popup">
        <h3 data-i18n="editTitle">Editar Subt√≠tulo</h3>
        <textarea id="edit-popup-text"></textarea>
        <div id="edit-popup-stats" class="popup-stats"></div>
        <div class="control-group">
            <button id="save-edit-btn" data-i18n="saveButton">Guardar</button>
            <button id="cancel-edit-btn" data-i18n="cancelButton">Cancelar</button>
        </div>
    </div>

    <div id="translate-popup" class="popup">
        <h3 data-i18n="translateTitle">Traducir subt√≠tulos</h3>
        <p data-i18n="translateDes1">Ten en cuenta que esta traducci√≥n utiliza una API gratuita.</p>
        <p data-i18n="translateDes2">Con un l√≠mite de 10,000 palabras o solicitudes al mes.</p>
        <p data-i18n="translateDescription">Selecciona los idiomas de origen y de destino.</p>
        <div class="control-group">
            <label for="source-lang" data-i18n="sourceLanguageLabel">Idioma de origen:</label>
            <select id="source-lang">
            </select>
        </div>
        <div class="control-group">
            <label for="target-lang" data-i18n="targetLanguageLabel">Idioma de destino:</label>
            <select id="target-lang">
            </select>
        </div>
        <div style="margin-top: 10px;">
            <button id="start-translation-btn" data-i18n="startTranslationButton">Iniciar traducci√≥n</button>
            <button id="cancel-translation-btn-translate-popup" data-i18n="cancelButton">Cancelar</button>
        </div>
        <div id="translation-status" style="margin-top: 10px; color: yellow; font-size: 14px;"></div>
    </div>

    <div id="settings-popup" class="popup">
        <h3 data-i18n="settingsTitle">Ajustes</h3>
        
        <div class="settings-group">
            <label for="theme-switcher" data-i18n="themeLabel">Tema:</label>
            <select id="theme-switcher">
                <option value="dark" data-i18n="darkTheme">Oscuro</option>
                <option value="light" data-i18n="lightTheme">Claro</option>
            </select>
        </div>
        
        <div class="settings-group">
            <label for="language-switcher" data-i18n="uiLanguageLabel">Idioma de la UI:</label>
            <select id="language-switcher">
                <option value="es">Espa√±ol</option>
                <option value="en">English</option>
            </select>
        </div>
        
        <div class="settings-group">
            <label for="export-format" data-i18n="uiExportFormat">Formato de guardado:</label>
            <select id="export-format">
                <option value="srt">SRT</option>
                <option value="vtt">VTT</option>
            </select>
        </div>

        <div class="settings-actions">
            <button id="close-settings-btn" data-i18n="closeButton">Cerrar</button>
        </div>
    </div>

    <div id="help-popup" class="popup">
        <h3 data-i18n="helpTitle">Ayuda y Atajos de Teclado</h3>
        <div class="help-content">
            <h4>Reproducci√≥n</h4>
            <ul>
                <li><kbd>Espacio</kbd>: <span data-i18n="helpSpace">Reproducir / Pausar</span></li>
                <li><kbd>‚Üê</kbd>: <span data-i18n="helpLeftArrow">Retroceder un fotograma</span></li>
                <li><kbd>‚Üí</kbd>: <span data-i18n="helpRightArrow">Avanzar un fotograma</span></li>
            </ul>
            <h4>Edici√≥n de Subt√≠tulos</h4>
            <ul>
                <li><kbd>Ctrl</kbd> + <kbd>Z</kbd>: <span data-i18n="helpUndo">Deshacer</span></li>
                <li><kbd>Ctrl</kbd> + <kbd>Y</kbd>: <span data-i18n="helpRedo">Rehacer</span></li>
                <li><kbd>Supr</kbd> / <kbd>Borrar</kbd>: <span data-i18n="helpDelete">Eliminar subt√≠tulo seleccionado</span></li>
                <li><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>S</kbd>: <span data-i18n="helpSplit">Dividir subt√≠tulo</span></li>
                <li><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>M</kbd>: <span data-i18n="helpMerge">Unir con el siguiente</span></li>
            </ul>
            <h4>L√≠nea de Tiempo</h4>
            <ul>
                <li><kbd>+</kbd> / <kbd>-</kbd>: <span data-i18n="helpZoom">Aumentar / Disminuir Zoom</span></li>
                <li><kbd>Doble Clic</kbd> en subt√≠tulo: <span data-i18n="helpDoubleClick">Abrir editor</span></li>
            </ul>
            <h4>General</h4>
             <ul>
                <li><kbd>Ctrl</kbd> + <kbd>S</kbd>: <span data-i18n="helpSave">Exportar Subt√≠tulos</span></li>
            </ul>
        </div>
        <button id="close-help-btn" data-i18n="closeButton">Cerrar</button>
    </div>

    <script src="script.js"></script>
</body>
</html>