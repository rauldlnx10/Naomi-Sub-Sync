<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="title">SubSync Avanzado</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="controls">
        <div class="control-group">
            <span id="app-name">Noemi Sub Sync 1.0</span>
            <a href="https://www.paypal.com/donate/?business=TQRD9HTEL6CC8&no_recurring=0&currency_code=EUR" target="_blank" class="donate-button" data-i18n="donateButton">
                Donar con PayPal
            </a>
            <button id="settings-btn" data-i18n="settingsButton" data-i18n-title="settingsButton">‚öôÔ∏è Ajustes</button>
        </div>
        <div class="control-group">
            <label for="video-file" class="file-label" data-i18n="loadVideo">üìΩ Cargar Video</label>
            <input type="file" id="video-file" accept="video/*">
            <label for="subtitle-file" class="file-label" data-i18n="loadSubs">üìÑ Cargar Subt√≠tulos</label>
            <input type="file" id="subtitle-file" accept=".srt, .vtt">
        </div>
        <div class="control-group">
            <select id="export-format">
                <option value="srt">SRT</option>
                <option value="vtt">VTT</option>
            </select>
            <button id="export-btn" data-i18n="exportButton">ü°ª Exportar</button>
        </div>
        <span id="error-message"></span>
    </div>

    <div id="main-content">
        <div id="video-container">
            <video id="video"></video>
            <div id="subtitle-overlay"></div>
        </div>
        
        <div id="middle-controls">
            <button id="undo-btn" data-i18n-title="undoTitle" disabled>‚ü≤</button>
            <button id="redo-btn" data-i18n-title="redoTitle" disabled>‚ü≥</button>
            <button id="add-sub-btn-timeline" data-i18n-title="addButton">+</button>
            <button id="edit-sub-btn-timeline" data-i18n-title="editButton" disabled>‚úèÔ∏è</button>
            <button id="delete-sub-btn-timeline" data-i18n-title="deleteButton" disabled>‚ùå</button>
            <button id="merge-sub-btn-timeline" data-i18n-title="mergeTitle" disabled>üîó</button>
            <button id="translate-btn" data-i18n="translateButton">üåê</button>
            <button class="center-btn" id="center-timeline" data-i18n-title="centerTitle">‚äπ</button>
            <button id="auto-scroll-btn" class="auto-scroll-btn" data-i18n-title="autoScrollTitle">‚õ∂</button>
        </div>
    
        <div id="timeline-wrapper">
            <div id="time-ruler"></div>
            <div id="timeline-container">
                <div id="timeline">
                    <canvas id="waveform-canvas"></canvas>
                </div>
                <div id="current-time"></div>
            </div>
            <div id="tooltip"></div>
        </div>
    </div>

    <div id="bottom-controls">
        <div class="control-group" id="video-controls">
            <button id="play-pause-btn" class="video-ctrl-btn" data-i18n-title="playPauseTitle">‚ñ∂</button>
            <button id="prev-sub-btn" class="video-ctrl-btn" data-i18n-title="prevSubTitle">‚èÆ</button>
            <button id="step-backward-btn" class="video-ctrl-btn" data-i18n-title="stepBackwardTitle">‚Ü∫</button>
            <button id="step-forward-btn" class="video-ctrl-btn" data-i18n-title="stepForwardTitle">‚Üª</button>
            <button id="next-sub-btn" class="video-ctrl-btn" data-i18n-title="nextSubTitle">‚è≠</button>
            <div class="separator"></div>
            <button id="mute-unmute-btn" class="video-ctrl-btn" data-i18n-title="muteUnmuteTitle">üîä</button>
            <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="1" data-i18n-title="volumeTitle">
            <span id="volume-value">100%</span>
        </div>
        <div class="control-group" id="playback-rate-control">
            <label for="playback-rate-slider" data-i18n="playbackRateLabel">Velocidad:</label>
            <input type="range" id="playback-rate-slider" min="0.25" max="2" step="0.25" value="1" data-i18n-title="playbackRateTitle">
            <span id="playback-rate-value">1.0x</span>
        </div>
        <div class="control-group" id="zoom-control">
            <label for="zoom-slider" data-i18n="zoomLabel">Zoom:</label>
            <button class="zoom-btn" id="zoom-out" data-i18n-title="zoomOutTitle">-</button>
            <input type="range" id="zoom-slider" min="20" max="500" value="100">
            <span id="zoom-value">100</span>
            <button class="zoom-btn" id="zoom-in" data-i18n-title="zoomInTitle">+</button>
        </div>
        <div class="control-group">
            <label for="offset-input" data-i18n="offsetLabel">Desplazar:</label>
            <input type="number" id="offset-input" value="0" step="100" class="offset-input" data-i18n-title="offsetTitle">
            <span class="ms-unit">ms</span>
            <button id="apply-offset-btn" data-i18n="applyOffsetButton" class="small-button">Aplicar</button>
        </div>
        <div class="find-controls">
            <button id="find-btn" class="small-button" data-i18n="findButton">üîé Buscar</button>
            <input type="text" id="find-input" data-i18n-placeholder="findPlaceholder" class="find-input">
            <button id="find-next-btn" class="small-button" data-i18n="findNextButton" disabled>‚è≠ Siguiente</button>
        </div>
    </div>

    <div id="edit-popup" class="popup">
        <h3 data-i18n="editTitle">Editar Subt√≠tulo</h3>
        <textarea id="edit-popup-text"></textarea>
        <div>
            <button id="save-edit-btn" data-i18n="saveButton">Guardar</button>
            <button id="cancel-edit-btn" data-i18n="cancelButton">Cancelar</button>
        </div>
    </div>
    
    <div id="translate-popup" class="popup">
        <h3 data-i18n="translateTitle">Traducir subt√≠tulos</h3>
        <p data-i18n="translateDes1">Ten en cuenta que esta traducci√≥n utiliza una API gratuita</p>
        <p data-i18n="translateDes2">Con un l√≠mite de 10,000 palabras o solicitudes al mes</p>
        <p data-i18n="translateDescription">Selecciona los idiomas de origen y de destino.</p>
        <div class="control-group">
            <label for="source-lang" data-i18n="sourceLanguageLabel">Idioma de origen:</label>
            <select id="source-lang"></select>
        </div>
        <div class="control-group">
            <label for="target-lang" data-i18n="targetLanguageLabel">Idioma de destino:</label>
            <select id="target-lang"></select>
        </div>
        <div style="margin-top: 10px;">
            <button id="start-translation-btn" data-i18n="startTranslationButton">Iniciar traducci√≥n</button>
            <button id="cancel-translation-btn" data-i18n="cancelButton">Cancelar</button>
        </div>
        <div id="translation-status"></div>
    </div>

    <div id="settings-popup" class="popup">
        <h3 data-i18n="settingsTitle">Ajustes</h3>
        <div class="setting-item">
            <label for="language-switcher" data-i18n="languageLabel">Idioma:</label>
            <select id="language-switcher">
                <option value="es">Espa√±ol</option>
                <option value="en">English</option>
                <option value="it">Italian</option>
                <option value="ja">Japanese</option>
            </select>
        </div>
        <div class="setting-item">
            <label for="theme-switcher" data-i18n="themeLabel">Tema:</label>
            <select id="theme-switcher">
                <option value="dark" data-i18n="darkTheme">Oscuro</option>
                <option value="light" data-i18n="lightTheme">Claro</option>
            </select>
        </div>
        <div class="setting-item">
            <label for="frame-rate-select" data-i18n="frameRateLabel">Fotogramas por segundo:</label>
            <select id="frame-rate-select">
                <option value="23.976">23.976 (Film)</option>
                <option value="24">24 (Cinema)</option>
                <option value="25">25 (PAL)</option>
                <option value="29.97">29.97 (NTSC)</option>
                <option value="30">30</option>
                <option value="50">50 (PAL Progresivo)</option>
                <option value="59.94">59.94 (NTSC Progresivo)</option>
                <option value="60">60</option>
            </select>
        </div>
        <div class="setting-item">
            <label for="autosave-checkbox" data-i18n="enableAutosaveLabel">Activar Autoguardado:</label>
            <input type="checkbox" id="autosave-checkbox" checked>
        </div>
        <div style="margin-top: 20px;">
            <button id="close-settings-btn" data-i18n="closeButton">Cerrar</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>